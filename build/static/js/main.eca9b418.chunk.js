(this["webpackJsonptek-sensor-config-react"]=this["webpackJsonptek-sensor-config-react"]||[]).push([[0],{11:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext();t.a=r},116:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(6),r=n(0),l=n.n(r),c=n(11),o=n(2),i=n(122),s=n(119),u=n.n(s);function m(e){return l.a.createElement(r.Fragment,null,l.a.createElement(c.a.Consumer,null,(function(t){return l.a.createElement(f,Object.assign({},e,{socket:t}))})))}function f(t){var n=t.socket,c=Object(r.useState)(""),s=Object(a.a)(c,2),m=s[0],f=s[1],g=Object(r.useState)(""),d=Object(a.a)(g,2),p=d[0],h=d[1],b=Object(r.useState)("lorawan-ns-na.tektelic.com"),_=Object(a.a)(b,2),E=_[0],y=_[1],v=Object(r.useState)([]),O=Object(a.a)(v,2),j=O[0],k=O[1],w=Object(r.useState)({name:"Loading sensors..."}),C=Object(a.a)(w,2),S=C[0],x=C[1],N=Object(r.useState)(!1),D=Object(a.a)(N,2),I=D[0],A=D[1],L=Object(r.useState)(!1),F=Object(a.a)(L,2),P=F[0],T=F[1],U=Object(r.useState)(!1),R=Object(a.a)(U,2),B=R[0],z=R[1],M=Object(r.useState)(!1),J=Object(a.a)(M,2),K=J[0],W=J[1],q=Object(r.useState)(!1),H=Object(a.a)(q,2),V=H[0],Y=H[1],G=function(e){console.log(e),x(e),n.emit("updateSensorId",e.id)};return Object(r.useEffect)((function(){null!==n&&(n.emit("getAvailableSensors"),n.on("availableSensors",(function(e){z(!1),console.log(e),k(e),G(e[0])})),n.on("loginFail",(function(){z(!0)})),n.on("loginSuccess",(function(){n.emit("getUserApplications")})))}),[n]),Object(r.useEffect)((function(){var t=u()(e.argv.slice(2));console.log(t)})),l.a.createElement(r.Fragment,null,l.a.createElement(o.u,{style:{margin:20}},l.a.createElement(o.g,{sm:12,lg:2,xs:12},l.a.createElement(o.i,{open:I,toggle:function(){return A(!I)}},l.a.createElement(o.l,{style:{width:"100%"},caret:!0,outline:!0,theme:"light"},S.name),l.a.createElement(o.k,null,j.map((function(e,t){return l.a.createElement(o.j,{onClick:function(){return G(e)}},e.name)}))))),l.a.createElement(o.g,{sm:12,lg:2,xs:12,style:{display:K?"none":"inline-block"}},l.a.createElement(o.n,{placeholder:"Username",value:m,onChange:function(e){f(e.target.value)}})),l.a.createElement(o.g,{sm:12,lg:2,xs:12,style:{display:K?"none":"inline-block"}},l.a.createElement(o.n,{placeholder:"Password",value:p,onChange:function(e){h(e.target.value)},type:"password"})),l.a.createElement(o.i,{open:P,toggle:function(){return T(!P)}},l.a.createElement(o.l,{style:{width:"100%"},caret:!0,outline:!0,theme:"light"},V?"Other Instance":E),l.a.createElement(o.k,null,l.a.createElement(o.j,{onClick:function(){y("https://lorawan-ns-na.tektelic.com"),W(!1),Y(!1)}},"TEKTELIC NA"),l.a.createElement(o.j,{onClick:function(){y("https://lorawan-ns-eu.tektelic.com"),W(!1),Y(!1)}},"TEKTELIC EU"),l.a.createElement(o.j,{onClick:function(){y("https://lorawan-ns-dev.tektelic.com"),W(!1),Y(!1)}},"TEKTELIC DEV"),l.a.createElement(o.j,{onClick:function(){y(""),W(!1),Y(!0)}},"Other TEK-NS Instance"),l.a.createElement(o.j,{onClick:function(){y("External NS"),W(!0),Y(!1)}},"External NS"))),l.a.createElement(o.g,{sm:12,lg:3,xs:12,style:{display:V?"inline-block":"none"}},l.a.createElement(o.n,{placeholder:"http(s)://YOUR_URL.COM (no backslash)",value:E,onChange:function(e){y(e.target.value)}})),l.a.createElement(o.g,{sm:12,lg:1,xs:12,style:{display:K?"none":"inline-block"}},l.a.createElement(o.a,{theme:"success",onClick:function(){n.emit("login",{nsUrl:E,username:m,password:p})}},"Connect")),l.a.createElement(o.g,{sm:12,lg:2,xs:12,style:{color:"red"}},B?"Invalid Credentials":null)),l.a.createElement(o.u,null,l.a.createElement(o.g,null,l.a.createElement(i.a,{sensorData:S,external:K}))))}}).call(this,n(40))},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var a=n(12),r=n(6),l=n(0),c=n.n(l),o=n(2),i=n(26),s=n.n(i),u=n(11);function m(e){var t=e.items,n=e.onClick,a=e.getItemDisplay,i=Object(l.useState)(t&&t[0]?t[0]:null),s=Object(r.a)(i,2),u=s[0],m=s[1];return t?c.a.createElement(o.q,null,t.map((function(e,t){return c.a.createElement(o.r,{action:!0,active:u===e||null===u&&0===t,onClick:function(){m(e),n&&n(e)}},a?a(e):JSON.stringify(e))}))):c.a.createElement("p",null,"Loading...")}function f(e){var t=e.lg,n=e.header,a=e.items,r=e.onClick,l=e.getItemDisplay,i=e.style;return c.a.createElement(o.g,{sm:12,lg:t,xs:12,style:i},c.a.createElement(o.c,null,c.a.createElement(o.e,null,n),a&&a.length>0?c.a.createElement(m,{items:a,onClick:r,getItemDisplay:l}):null))}function g(e){var t=new Date(e),n=t.getHours(),a=t.getMinutes(),r=t.getSeconds(),l=t.getDate(),c=t.getMonth()+1,o=t.getFullYear();return(n>9?n:"0"+n)+":"+(a>9?a:"0"+a)+":"+(r>9?r:"0"+r)+", "+l+" "+function(e){if(1==e)return"Jan";if(2==e)return"Feb";if(3==e)return"Mar";if(4==e)return"Apr";if(5==e)return"May";if(6==e)return"Jul";if(7==e)return"Jun";if(8==e)return"Aug";if(9==e)return"Sep";if(10==e)return"Oct";if(11==e)return"Nov";if(12==e)return"Dec";throw new Error("Month value should be between 1 and 12.")}(c)+" "+o}var d=n(117),p=n.n(d);function h(e){return c.a.createElement(l.Fragment,null,c.a.createElement(u.a.Consumer,null,(function(t){return c.a.createElement(b,Object.assign({},e,{socket:t}))})))}function b(e){var t=e.socket,n=e.displayIndex,i=e.display,s=Object(l.useState)(""),u=Object(r.a)(s,2),f=u[0],d=u[1],h=Object(l.useState)(""),b=Object(r.a)(h,2),_=b[0],E=b[1],y=Object(l.useState)(""),v=Object(r.a)(y,2),O=v[0],j=v[1],k=Object(l.useState)(1),w=Object(r.a)(k,2),C=w[0],S=w[1],x=Object(l.useState)([]),N=Object(r.a)(x,2),D=N[0],I=N[1],A=function(e){d(JSON.stringify(e.ns,null,2)),E(JSON.stringify(e.app,null,2)),j(JSON.stringify(e.lora,null,2))},L=function(e){S((function(t){return parseInt(t)+parseInt(e)}))};return Object(l.useEffect)((function(){D&&0!==D.length?A(D[0]):A({ns:"No messages to show from this sensor.",app:"No messages to show from this sensor.",lora:"No messages to show from this sensor."})}),[D]),Object(l.useEffect)((function(){t.on("allDeviceMessages",(function(e){console.log(e),I((function(t){return p.a.reverse(e)}))})).on("newDeviceMessage",(function(e){console.log(e),I((function(t){return[e].concat(Object(a.a)(t))}))})).on("decodedMessage",(function(e){console.log(e),I((function(t){return[e].concat(Object(a.a)(t))}))}))}),[t]),c.a.createElement(l.Fragment,null,c.a.createElement(o.u,{style:{display:i,width:"100%"}},c.a.createElement(o.g,{sm:12,lg:5,xs:12},D.length>0?c.a.createElement(l.Fragment,null,c.a.createElement(m,{items:D.slice(20*(C-1),20*C),onClick:A,getItemDisplay:function(e){return g(e.ns.ts)+"  |  "+e.ns.messageType+" | "+e.ns.fport}}),c.a.createElement(o.u,null,c.a.createElement(o.a,{onClick:function(){return L(-1)}},c.a.createElement("p",null,"<<")),c.a.createElement(o.n,{style:{width:"30%"},value:C,onChange:function(e){""!==e.target.value&&S(e.target.value)},placeholder:"Page number (1-50)"}),c.a.createElement(o.a,{onClick:function(){return L(1)}},c.a.createElement("p",null,">>")))):null),c.a.createElement(o.g,{sm:12,lg:7,xs:12},c.a.createElement("pre",null,0===n?f:1===n?_:O))))}function _(e){return c.a.createElement(l.Fragment,null,c.a.createElement(u.a.Consumer,null,(function(t){return c.a.createElement(E,Object.assign({},e,{socket:t}))})))}function E(e){var t=e.socket,n=e.device,a=Object(l.useState)(""),i=Object(r.a)(a,2),u=i[0],m=i[1],f=Object(l.useState)(""),g=Object(r.a)(f,2),d=g[0],p=g[1],h=Object(l.useState)(""),b=Object(r.a)(h,2),_=b[0],E=b[1],y=Object(l.useState)(""),v=Object(r.a)(y,2),O=v[0],j=v[1];return Object(l.useEffect)((function(){n&&n.deviceEUI&&E(n.deviceEUI)}),[n]),c.a.createElement(l.Fragment,null,c.a.createElement(o.h,{fluid:!0},c.a.createElement(o.u,null,c.a.createElement(o.g,{sm:12,lg:12,xs:12},c.a.createElement(o.c,{style:{padding:20}},c.a.createElement(o.f,null,"Encode Hex Payload"),c.a.createElement(o.u,null,c.a.createElement(o.g,{sm:12,lg:4,xs:12},c.a.createElement(o.n,{placeholder:"Enter bytes",value:O,onChange:function(e){!function(e){j(e),p(s.a.encode(e.split(" ").map((function(e){return parseInt(e,16)}))))}(e.target.value)}})),c.a.createElement(o.g,{sm:12,lg:4,xs:12},c.a.createElement(o.n,{placeholder:"Base64 encoded bytes...",value:d,onChange:function(e){!function(e){p(e)}(e.target.value)}})),c.a.createElement(o.g,{sm:12,lg:4,xs:12},c.a.createElement(o.n,{placeholder:"Port",value:u,onChange:function(e){m(e.target.value)}}))),c.a.createElement(o.n,{placeholder:"DevEUI",value:_,onChange:function(e){E(e.target.value)}}),c.a.createElement(o.a,{disabled:!n,onClick:function(){t.emit("downlink",{deveui:_,port:u,base64:d})}},"Send"))))))}var y=n(37),v=n(118),O=n(45),j=n(27),k=n.n(j),w=n(46),C=function(e){var t=e.element,n=e.activeLine,i=e.onChange,s=Object(l.useState)(Object(a.a)(t.access)[0]),u=Object(r.a)(s,2),m=u[0],f=u[1],g=Object(l.useState)(!1),d=Object(r.a)(g,2),p=(d[0],d[1],function(){var e=Object(w.a)(k.a.mark((function e(n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,f(n);case 3:i(t,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());return c.a.createElement(o.b,{vertical:!0},Object(a.a)(t.access).map((function(e,t){return c.a.createElement(o.a,{outline:!0,disabled:!n,onClick:function(t){return p(e,t)},key:e,active:e===m,size:"sm"},"R"===e?"Read":"Write")})))},S=function(e){var t=e.element,n=e.activeLine,r=e.onChange,i=Object(a.a)(t.access).includes("W"),s=Object.keys(t).filter((function(e){return/^(opt)[0-9]{1,2}$/.test(e)&&""!==t[e]})).map((function(e,n){return[[t[e]],t["val"+e.substr(3)]]})),u=function(e){r(t,e.target.value)};return i?s.length?c.a.createElement(l.Fragment,null,c.a.createElement(o.p,{size:"sm",disabled:!n,onChange:u},s.map((function(e){return c.a.createElement("option",{value:e[1],key:e[0]},e[0])})))):c.a.createElement(o.n,{size:"sm",placeholder:t.parameter_description,className:"mb-2",onChange:u}):c.a.createElement(l.Fragment,null)},x={__make_multiple_of_8:function(e){for(;e.length%8!=0;)e.unshift(!1)},__make_equal_number_of_bits:function(e,t){if(e.length!=t.length){for(;e.length>t.length;)t.unshift(!1);for(;t.length>e.length;)e.unshift(!1)}},__remove_leading_zeros:function(e){for(;1!=e[0]&&e.length>1;)e.shift()},__make_copy:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=Boolean(e[n]);return t},get_bits:function(e,t){var n=[];if("number"==typeof e&&"unsigned"===t){if(0==e)return[0];for(;e>0;)n.unshift(Boolean(e%2)),e=Math.floor(e/2)}else if("number"==typeof e&&"signed"===t){if(0===e)return[0];var r=!1;for(e<0&&(e=-e,r=!0);e>0;)n.unshift(Boolean(e%2)),e=Math.floor(e/2);if(this.__make_multiple_of_8(n),r)for(var l=1,c=(n=this.NOT(n)).length-1;l&&(n[c]?n[c]=!1:(n[c]=!0,l=0),c);)c--}else if("number"==typeof e&&"double"===t){var o="",i=new DataView(new ArrayBuffer(8));for(i.setFloat64(0,e,!1),u=0;u<8;u++){for(var s=i.getUint8(u).toString(2);8!==s.length;)s="0"+s;o+=s}n=o.split("").map((function(e){return"1"==e}))}else if("string"==typeof e&&"string"===t)for(var u=0;u<e.length;u++){var m=e[u].charCodeAt(0),f=this.get_bits(m,"unsigned");this.__make_multiple_of_8(f),n=n.concat(f)}else if("string"==typeof e&&"hexstring"===t){var g;g=e.length%2===0?e.split(""):("0"+e).split("");for(var d=[];g.length>0;)d=d.concat(parseInt("0x"+g.splice(0,2).join("")));for(u=0;u<d.length;u++){var p=d[u].toString(2).split("").map((function(e){return"0"!==e}));this.__make_multiple_of_8(p),n=[].concat(Object(a.a)(n),Object(a.a)(p))}}return this.__remove_leading_zeros(n),this.__make_multiple_of_8(n),n},init_mask:function(e,t){void 0===t&&(t=!0);for(var n=new Array(e),a=0;a<e;a++)n[a]=t;return n},to_byte_arr:function(e,t){this.__remove_leading_zeros(e),this.__make_multiple_of_8(e);for(var n=new Array(e.length/8),a=0;a<e.length;a+=8){for(var r=0,l=0,c=7;c>=0;c--)r+=e[a+c]<<l,l+=1;n[a/8]=r}if(void 0===t)return n;for(;n.length<Number(t);)n.unshift(0);return n},shift_left:function(e,t){for(var n=new Array(e.length+t),a=0;a<e.length;a++)n[a]=Boolean(e[a]);for(a=e.length;a<n.length;a++)n[a]=!1;return this.__remove_leading_zeros(n),this.__make_multiple_of_8(n),n},shift_right:function(e,t){for(var n=new Array(e.length),a=0;a<t;a++)n[a]=!1;for(var r=0;r<e.length-t;r++)n[r+t]=Boolean(e[r]);return this.__remove_leading_zeros(n),this.__make_multiple_of_8(n),n},AND:function(e,t){var n=this.__make_copy(e),a=this.__make_copy(t);this.__make_equal_number_of_bits(n,a);for(var r=new Array(n.length),l=0;l<n.length;l++)r[l]=Boolean(n[l]&a[l]);return this.__remove_leading_zeros(r),this.__make_multiple_of_8(r),r},OR:function(e,t){var n=this.__make_copy(e),a=this.__make_copy(t);this.__make_equal_number_of_bits(n,a);for(var r=new Array(n.length),l=0;l<n.length;l++)r[l]=Boolean(n[l]|a[l]);return this.__remove_leading_zeros(r),this.__make_multiple_of_8(r),r},XOR:function(e,t){var n=this.__make_copy(e),a=this.__make_copy(t);this.__make_equal_number_of_bits(n,a);for(var r=new Array(e.length),l=0;l<n.length;l++)r[l]=Boolean(n[l]^a[l]);return this.__remove_leading_zeros(r),this.__make_multiple_of_8(r),r},NOT:function(e){for(var t=this.__make_copy(e),n=new Array(e.length),a=0;a<t.length;a++)n[a]=!t[a];return n}};function N(e,t){if(e.hasOwnProperty("read")){if("W"==t.access)return{status:!1,error_code:"Tried reading from write-only field"};if("object"==typeof e.read)return{status:!1,error_code:'Syntax error, read commands cannot be of type "object"'}}else if(e.hasOwnProperty("write")){if("R"==t.access)return{status:!1,error_code:"Tried writing to read-only field"};if("object"===typeof e.write){var n=Object.keys(e.write);if(n.length!=Object.keys(t).length-3)return{status:!1,error_code:"Invalid number of fields in group"};for(var a=0;a<n.length;a++)if(void 0===t[n[a]])return{status:!1,error_code:'Field "'+n[a]+'" does not exist'}}}return{status:!0,error_code:"No error"}}function D(e,t,n,a,r){void 0===r&&(r=x.get_bits(0));var l=x.get_bits(e,a),c=Number(t)-Number(n)+1,o=x.init_mask(c);return l=x.AND(l,o),l=x.shift_left(l,n),r=x.OR(r,l)}function I(e,t,n){for(var a=e.split(" "),r=[],l=0;l<a.length;l++){var c=parseInt(a[l]);t||"1"!=n||(c|=128),r.push(c)}return r}function A(e,t,n){n.hasOwnProperty(t)?n[t]=n[t].concat(e):n[t]=e}function L(e,t){A(I(e.header,!0,e.or_80_to_write),e.port,t)}function F(e,t,n){var a=I(t.header,!1,t.or_80_to_write),r=e.write;"string"!==t.type&&"hexstring"!==t.type&&(r=Number(r)-Number(t.addition?t.addition:0),r=Number(r)/Number(t.coefficient));var l=D(r,parseInt(t.bit_start),parseInt(t.bit_end),t.type,0);if(0==t.multiple||void 0===t.multiple)var c=t.data_size;else c=l.length/8;var o=x.to_byte_arr(l,c);A(a=a.concat(o),t.port,n)}function P(e,t,n){for(var a=I(t.header,!1,t.or_80_to_write),r=x.get_bits(0),l=Object.keys(e.write),c=Object.values(e.write),o=parseInt(t[l[0]].data_size),i=[],s=0;s<l.length;s++){var u=t[l[s]],m=c[s];"string"!==u.type&&"hexstring"!==u.type&&(m=Number(m)-Number(u.addition?u.addition:0),m=Number(m)/Number(u.coefficient)),0==u.multiple||void 0===u.multiple?r=D(m,parseInt(u.bit_start),parseInt(u.bit_end),u.type,r):o+=(i=x.get_bits(m,u.type)).length/8}r=r.concat(i);var f=x.to_byte_arr(r,o);A(a=a.concat(f),t.port,n)}function T(e,t){var n=function(e,t){for(var n=!0,a=Object.keys(e),r=0;r<a.length;r++)for(var l=a[r],c=e[l],o=Object.keys(e[l]),i=0;i<o.length;i++){var s=o[i],u=c[s],m=t[l][s];if(void 0===m)return{valid:!1,message:l+" -> "+s,error_code:'Field/group "'+s+'" does not exist'};if(!(n=N(u,m)).status)return{valid:!1,message:l+" -> "+s,error_code:n.error_code}}return{valid:!0,message:"no message",error_code:"no error code"}}(e,t);if(!n.valid)return{error:"Commands are invalid, failed at: "+n.message,error_code:n.error_code};for(var a=JSON.parse(JSON.stringify(t)),r={},l=Object.keys(e),c=0;c<l.length;c++)for(var o=e[l[c]],i=a[l[c]],s=Object.keys(o),u=0;u<s.length;u++){var m=o[s[u]],f=i[s[u]],g=m.hasOwnProperty("read"),d=m.hasOwnProperty("write")&&"object"!=typeof m.write,p=!(g||d);g?L(f,r):d?F(m,f,r):p&&P(m,f,r)}return r}function U(e){return c.a.createElement(l.Fragment,null,c.a.createElement(u.a.Consumer,null,(function(t){return c.a.createElement(R,Object.assign({},e,{socket:t}))})))}function R(e){var t=e.groupData,n=e.downlinkData,a=e.display,i=e.onChange,s=e.sensor,u=e.category,m=Object(l.useState)({}),f=Object(r.a)(m,2),g=f[0],d=f[1],p=Object(l.useState)({}),h=Object(r.a)(p,2),b=h[0],_=h[1],E=Object(l.useState)(!1),v=Object(r.a)(E,2),j=v[0],x=v[1],N=Object(l.useState)("R"),D=Object(r.a)(N,2),I=D[0],A=D[1],L=function(){var e=Object(w.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(n),i("R"===n?b:g);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object.keys("R"===I?b:g)[0],t=Object.keys(("R"===I?b:g)[e])[0],n=Object(O.a)({},e,Object(O.a)({},t,j?null:("R"===I?b:g)[e][t]));i(n),x(!j)},P=function(){var e=Object(w.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d((function(e){return e||((e={})[t.category_name]={},""!==t.group_name&&(e[t.category_name][t.group_name]={write:{}})),""!==t.group_name?e[t.category_name][t.group_name].write[t.parameter_name]=n:e[t.category_name][t.parameter_name]={write:n},Object(y.a)({},e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){j&&(console.log(b),i("R"===I?b:g))}),[g,b]),Object(l.useEffect)((function(){x(!1),_((function(e){return e[t[0].category_name]={},""!==t[0].group_name?e[t[0].category_name][t[0].group_name]={read:!0}:e[t[0].category_name][t[0].parameter_name]={read:!0},Object(y.a)({},e)})),d((function(e){if(""!==t[0].access||"R"!==t[0].access)if(e[t[0].category_name]={},""!==t[0].group_name){e[t[0].category_name][t[0].group_name]={write:{}};for(var n=0;n<t.length;n++)e[t[n].category_name][t[n].group_name].write[t[n].parameter_name]=0}else e[t[0].category_name][t[0].parameter_name]={write:0};return Object(y.a)({},e)}))}),[n]),c.a.createElement(l.Fragment,null,t.length>1?c.a.createElement("tr",{"data-root":t[0].category_description,key:s+"_"+u+"_header",style:{display:a,color:"#0067F4"}},c.a.createElement("th",null,t[0].group_description)):null,t.map((function(e,n){return c.a.createElement("tr",{"data-root":e.category_description,key:s+"_"+u+"_"+e.parameter_name,style:{display:a}},c.a.createElement("th",{scope:"row",style:{opacity:"100%"}},e.parameter_description),0===n&&c.a.createElement("td",{rowSpan:t.length,className:"switcher"},c.a.createElement(o.m,{toggle:!0,checked:j,onChange:F})),0===n&&c.a.createElement("td",{rowSpan:t.length,className:"tableLine "+(j&&"activeLine")},c.a.createElement(C,{element:e,activeLine:j,onChange:L})),c.a.createElement("td",{className:"tableLine "+(j&&"activeLine")},"W"===I&&c.a.createElement(S,{element:e,activeLine:j,onChange:P})))})))}function B(e){var t=e.downlinkData,n=e.rawData,a=e.category,r=e.setDownlinksObject,l=[];console.log("data"),console.log(n);for(var o=0;o<n.length;o++){var i,s=!0,u=Object(v.a)(l);try{for(u.s();!(i=u.n()).done;){var m=i.value;m.group===n[o].group_name&&m.category===n[o].category_name&&(s=!1)}}catch(d){u.e(d)}finally{u.f()}s&&l.push({group:n[o].group_name,category:n[o].category_name})}var f=function(e){e&&(console.log(e),r((function(t){var n=Object(y.a)({},t),a=Object.keys(e)[0],r=Object.keys(e[a])[0];return null===e[a][r]?(n[a]&&delete n[a][r],n):(n[a]||(n[a]={}),n[a][r]=e[a][r],n)})))},g=l.map((function(e,r){var l=n.filter((function(t){return t.group_name===e.group&&t.category_name===e.category}));return console.log(e.group,e.category),console.log(l),""===e.group?l.map((function(n){return c.a.createElement(U,{downlinkData:t,groupData:[n],key:n.category_name+"_"+n.parameter_name,display:a===e.category?"table-row":"none",onChange:f})})):c.a.createElement(U,{downlinkData:t,groupData:l,key:l[0].category_name+"_"+l[0].group_name,display:a===e.category?"table-row":"none",onChange:f})}));return c.a.createElement("table",{className:"table mb-0"},c.a.createElement("thead",{className:"bg-light"},c.a.createElement("tr",{className:"smaller"},c.a.createElement("th",{scope:"col",className:"border-0",style:{width:"30%"}},"Label"),c.a.createElement("th",{scope:"col",className:"border-0",style:{width:"10%"}}),c.a.createElement("th",{scope:"col",className:"border-0",style:{width:"10%"}}),c.a.createElement("th",{scope:"col",className:"border-0",style:{width:"30%"}},"Value"))),c.a.createElement("tbody",null,g))}function z(e){return c.a.createElement(l.Fragment,null,c.a.createElement(u.a.Consumer,null,(function(t){return c.a.createElement(J,Object.assign({},e,{socket:t}))})))}function M(e){for(var t="",n=0;n<e.length;n++){var a=e[n].toString(16).toUpperCase();1===a.split("").length&&(a="0"+a),t+=a}return t}function J(e){var t=e.sensorData,n=e.display,a=e.device,i=e.socket,u=e.manual,m=Object(l.useState)(),f=Object(r.a)(m,2),g=f[0],d=f[1],p=Object(l.useState)(!1),h=Object(r.a)(p,2),b=h[0],E=h[1],y=Object(l.useState)({}),v=Object(r.a)(y,2),O=v[0],j=v[1],k=Object(l.useState)(""),w=Object(r.a)(k,2),C=w[0],S=w[1],x=Object(l.useState)(""),N=Object(r.a)(x,2),D=N[0],I=N[1];return Object(l.useEffect)((function(){t&&t.downlink&&d(Object.keys(t.downlink)[0])}),[]),Object(l.useEffect)((function(){if(O&&t.downlink){S(T(O,t.downlink));for(var e="",n=0,a=Object.entries(T(O,t.downlink));n<a.length;n++){var r=a[n];e+="\n                Port ".concat(r[0],": \n                >>>Base 64 - ").concat(s.a.encode(r[1]),"\n                >>>Hex     - ").concat(M(r[1]),"\n                ")}I(e)}}),[O]),Object(l.useEffect)((function(){j({})}),[t]),c.a.createElement(l.Fragment,null,c.a.createElement(o.h,{style:{display:n},fluid:!0},c.a.createElement(o.u,{style:{display:u?"none":"flex"}},c.a.createElement(o.i,{open:b,toggle:function(){return E(!b)}},c.a.createElement(o.l,null,g),c.a.createElement(o.k,null,Object.keys(t.downlink).map((function(e,t){return c.a.createElement(o.j,{onClick:function(){d(e)}},e)})))),c.a.createElement(o.a,{style:{marginLeft:20},disabled:!a,onClick:function(){for(var e=0,t=Object.entries(C);e<t.length;e++){var n=t[e];i.emit("downlink",{deveui:a.deviceEUI,port:n[0],base64:s.a.encode(n[1])}),console.log({deveui:a.deviceEUI,port:n[0],base64:s.a.encode(n[1])})}},theme:"success"},"Send")),c.a.createElement(o.u,null,c.a.createElement("pre",null,D)),c.a.createElement(o.u,{style:{display:u?"block":"none"}},c.a.createElement(_,{device:a})),c.a.createElement(o.u,{style:{display:u?"none":"block"}},c.a.createElement(o.g,{sm:12,lg:12,xs:12},c.a.createElement(B,{rawData:t.raw,downlinkData:t.downlink,category:g,device:a,setDownlinksObject:j})))))}function K(e){return c.a.createElement(l.Fragment,null,c.a.createElement(u.a.Consumer,null,(function(t){return c.a.createElement(W,Object.assign({},e,{socket:t}))})))}function W(e){var t=e.socket,n=e.sensorData,i=e.external,u=Object(l.useState)([]),m=Object(r.a)(u,2),g=m[0],d=m[1],p=Object(l.useState)(),b=Object(r.a)(p,2),_=(b[0],b[1]),E=Object(l.useState)({}),y=Object(r.a)(E,2),v=y[0],O=y[1],j=Object(l.useState)(),k=Object(r.a)(j,2),w=k[0],C=k[1],S=Object(l.useState)(!1),x=Object(r.a)(S,2),N=x[0],D=x[1],I=Object(l.useState)(!1),A=Object(r.a)(I,2),L=A[0],F=A[1],P=Object(l.useState)(0),T=Object(r.a)(P,2),U=T[0],R=T[1],B=Object(l.useState)(!1),M=Object(r.a)(B,2),J=M[0],K=M[1],W=Object(l.useState)(""),q=Object(r.a)(W,2),H=q[0],V=q[1],Y=Object(l.useState)(""),G=Object(r.a)(Y,2),X=G[0],Q=G[1],Z=Object(l.useState)(!1),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(l.useState)(!1),ae=Object(r.a)(ne,2),re=ae[0],le=ae[1],ce=Object(l.useState)(""),oe=Object(r.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(l.useState)(""),me=Object(r.a)(ue,2),fe=me[0],ge=me[1],de=function(e){_(e),console.log(e.id.id),t.emit("openApplication",e.id.id)},pe=function(e){C(e),console.log(e),t.emit("openDevice",e)};return Object(l.useEffect)((function(){t.on("userApplications",(function(e){console.log(e),d(e),de(e?e[0]:null)})).on("applicationDevices",(function(e){console.log(e),O(e),pe(e?e[0]:null)}))}),[t]),c.a.createElement(l.Fragment,null,c.a.createElement("div",null,c.a.createElement(o.h,{fluid:!0},c.a.createElement(o.u,null,c.a.createElement(f,{style:{display:i?"none":"inline-block"},lg:2,header:"Applications",items:g,onClick:de,getItemDisplay:function(e){return e.name}}),c.a.createElement(f,{style:{display:i?"none":"inline-block"},lg:2,header:"Devices",items:v,onClick:pe,getItemDisplay:function(e){return e.name}}),c.a.createElement(o.g,{sm:12,lg:4,xs:12,style:{display:i?"inline-block":"none"}},c.a.createElement(o.c,null,c.a.createElement(o.e,null,"Decode Payload"),c.a.createElement(o.d,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(o.n,{placeholder:"Insert Payload here...",value:H,onChange:function(e){V(e.target.value.replace(" ",""))}}),c.a.createElement(o.n,{style:{display:re?"none":"block"},placeholder:"Port",value:X,onChange:function(e){Q(e.target.value.replace(" ",""))}})),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(o.o,{name:"hex",checked:!ee,onChange:function(){return te(!1)}},"Base 64"),c.a.createElement(o.o,{style:{paddingLeft:20},name:"hex",checked:ee,onChange:function(){return te(!0)}},"Hex")),c.a.createElement(o.m,{checked:re,onChange:function(){return le(!re)}},"LoRa-encrypted")),c.a.createElement("div",{style:{display:re?"block":"none"}},c.a.createElement(o.n,{placeholder:"App Session Key",value:ie,onChange:function(e){se(e.target.value.replace(" ",""))}}),c.a.createElement(o.n,{placeholder:"Network Session Key",value:fe,onChange:function(e){ge(e.target.value.replace(" ",""))}})),c.a.createElement(o.a,{onClick:function(){var e,n;if(ee){var r=function(e){var t=e.split(""),n=[];for(;t.length>0;)n=[].concat(Object(a.a)(n),[parseInt("0x"+t.splice(0,2).join(""))]);return n}(H);e=s.a.encode(r)}else e=H;n=re?{nwkkey:fe,appkey:ie,payload:e}:{payload:e,port:X},t.emit("decode",n)}},"Decode")))),c.a.createElement(o.g,{sm:12,lg:8,xs:12},c.a.createElement(o.c,null,c.a.createElement(o.e,{style:{display:"flex"}},c.a.createElement(o.i,{open:L,toggle:function(){return F(!L)}},c.a.createElement(o.l,{caret:!0,outline:!0},N?"Downlink":"Uplink"),c.a.createElement(o.k,null,c.a.createElement(o.j,{onClick:function(){return D(!0)}},"Downlink"),c.a.createElement(o.j,{onClick:function(){return D(!1)}},"Uplink"))),c.a.createElement(o.a,{style:{display:N||i?"none":"inline-block",marginLeft:40},onClick:function(){return R(0)},active:0===U,outline:!0},"Network Server"),c.a.createElement(o.a,{style:{display:N?"none":"inline-block",marginLeft:20},onClick:function(){return R(1)},active:1===U,outline:!0},"App"),c.a.createElement(o.a,{style:{display:N?"none":"inline-block",marginLeft:20},onClick:function(){return R(2)},active:2===U,outline:!0},"LoRaMAC"),c.a.createElement(o.a,{style:{display:N?"inline-block":"none",marginLeft:20},onClick:function(){return K(!0)},active:J,outline:!0},"Manual"),c.a.createElement(o.a,{style:{display:N?"inline-block":"none",marginLeft:0},onClick:function(){return K(!1)},active:!J,outline:!0},"Generate")),c.a.createElement(o.d,null,c.a.createElement(h,{display:N?"none":"flex",displayIndex:U}),n&&n.downlink&&n.raw?c.a.createElement(z,{display:N?"block":"none",manual:J,sensorData:n,device:w}):null)))))))}Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))})},124:function(e,t,n){e.exports=n(247)},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},204:function(e,t,n){},207:function(e,t,n){},241:function(e,t){},247:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(20),c=n.n(l),o=(n(129),n(130),n(123)),i=n(9),s=(n(131),function(){return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"404 Page"))}),u=n(2),m=(n(204),function(e){return r.a.createElement("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},r.a.createElement(u.h,null,r.a.createElement(u.u,null,r.a.createElement(u.g,null,e.children))),r.a.createElement(u.h,{className:"mt-5 footer",fluid:!0},r.a.createElement(u.g,null,r.a.createElement(u.h,null,r.a.createElement(u.g,null,r.a.createElement(u.s,{className:"smaller"},r.a.createElement(u.t,null,r.a.createElement("span",{className:"active nav-link smaller",style:{color:"#a29898"}},"2009-2020 TEKTELIC Communications Inc.")),r.a.createElement(u.t,null,r.a.createElement("a",{href:"https://tektelic.com",className:"active nav-link smaller"},"Tell us about your LoraWAN use cases."))))))))}),f=n(116),g=(n(207),function(e){return r.a.createElement("div",{style:{height:"100%"}},e.children,r.a.createElement(u.h,{className:"mt-5"},r.a.createElement(u.g,null,r.a.createElement(u.s,{className:"smaller"},r.a.createElement(u.t,null,r.a.createElement("span",{className:"active nav-link smaller",style:{color:"#a29898"}},"2009-2020 TEKTELIC Communications Inc.")),r.a.createElement(u.t,null,r.a.createElement("a",{href:"https://tektelic.com",className:"active nav-link smaller"},"Tell us about your LoraWAN use cases."))))))}),d=function(e){var t=e.component,n=e.layout,a=Object(o.a)(e,["component","layout"]);return r.a.createElement(i.a,Object.assign({},a,{render:function(e){return console.log("props",e),r.a.createElement(n,null,r.a.createElement(t,e))}}))},p=Object(i.f)((function(){return r.a.createElement(i.c,null,r.a.createElement(d,{exact:!0,path:"/",layout:g,component:f.a}),r.a.createElement(d,{layout:m,component:s}))}));var h=function(){return r.a.createElement(p,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(210),n(211);var b,_=n(11),E=n(121),y=n.n(E),v=n(71);n(244).config(),b=y()("http://localhost:13337"),c.a.render(r.a.createElement(_.a.Provider,{value:b},r.a.createElement(v.a,null,r.a.createElement(h,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t){var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var t=e.length/4*3,n=new ArrayBuffer(t);return this.decode(e,n),n},removePaddingChars:function(e){return 64===this._keyStr.indexOf(e[e.length-1])?e.substring(0,e.length-1):e}};e.exports={decode:function(e,t){e=n.removePaddingChars(e),e=n.removePaddingChars(e);var a,r,l,c,o,i,s,u=parseInt(e.length/4*3,10),m=0,f=0;for(a=t?new Uint8Array(t):new Uint8Array(u),m=0;m<u;m+=3)r=n._keyStr.indexOf(e[f++])<<2|(o=n._keyStr.indexOf(e[f++]))>>4,l=(15&o)<<4|(i=n._keyStr.indexOf(e[f++]))>>2,c=(3&i)<<6|(s=n._keyStr.indexOf(e[f++])),a[m]=r,64!==i&&(a[m+1]=l),64!==s&&(a[m+2]=c);return a},encode:function(e){for(var t,n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),l=r.byteLength,c=l%3,o=l-c,i=0;i<o;i+=3)n+=a[(16515072&(t=r[i]<<16|r[i+1]<<8|r[i+2]))>>18]+a[(258048&t)>>12]+a[(4032&t)>>6]+a[63&t];return 1===c?n+=a[(252&(t=r[o]))>>2]+a[(3&t)<<4]+"==":2===c&&(n+=a[(64512&(t=r[o]<<8|r[o+1]))>>10]+a[(1008&t)>>4]+a[(15&t)<<2]+"="),n}}}},[[124,1,2]]]);
//# sourceMappingURL=main.eca9b418.chunk.js.map